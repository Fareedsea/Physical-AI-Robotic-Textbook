# Data Model: Physical AI & Humanoid Robotics Textbook

## Overview
This document defines the data models for the Physical AI & Humanoid Robotics Textbook project, including content structure, user interactions, and RAG system components.

## Textbook Content Model

### Chapter
- **id**: Unique identifier for the chapter
- **title**: Title of the chapter
- **slug**: URL-friendly identifier
- **content**: Markdown content of the chapter
- **learningObjectives**: Array of learning objectives for the chapter
- **prerequisites**: Array of prerequisite knowledge required
- **duration**: Estimated time to complete the chapter (in minutes)
- **difficulty**: Difficulty level (beginner, intermediate, advanced)
- **relatedChapters**: Array of related chapter IDs
- **createdAt**: Timestamp of creation
- **updatedAt**: Timestamp of last update

### Module
- **id**: Unique identifier for the module
- **chapterId**: Reference to the parent chapter
- **title**: Title of the module
- **content**: Markdown content of the module
- **type**: Type of content (theory, practical, exercise, quiz)
- **order**: Order of the module within the chapter
- **duration**: Estimated time to complete the module (in minutes)
- **learningOutcomes**: Array of measurable learning outcomes

### Exercise
- **id**: Unique identifier for the exercise
- **moduleId**: Reference to the parent module
- **title**: Title of the exercise
- **description**: Detailed description of the exercise
- **instructions**: Step-by-step instructions for the exercise
- **simulationEnvironment**: Required simulation environment (ROS 2, Gazebo, NVIDIA Isaac, etc.)
- **expectedOutcome**: Description of expected results
- **resources**: Array of required resources or files
- **difficulty**: Difficulty level (beginner, intermediate, advanced)

## User Interaction Model

### UserQuestion
- **id**: Unique identifier for the question
- **sessionId**: Reference to the user session
- **question**: The text of the question asked by the user
- **timestamp**: When the question was asked
- **userId**: Reference to the user (optional, for logged-in users)
- **context**: Context of the question (chapter, module, or general)

### ChatbotResponse
- **id**: Unique identifier for the response
- **questionId**: Reference to the corresponding question
- **response**: The text of the response generated by the chatbot
- **sources**: Array of source documents/chapters referenced in the response
- **confidence**: Confidence score of the response (0-1)
- **timestamp**: When the response was generated
- **feedback**: User feedback on the response quality (upvote/downvote)

### UserSession
- **id**: Unique identifier for the session
- **userId**: Reference to the user (optional)
- **startTime**: When the session started
- **endTime**: When the session ended (null if active)
- **currentPage**: Current page/chapter the user is viewing
- **progress**: Progress percentage in the textbook
- **questionsAsked**: Number of questions asked in this session

## RAG System Model

### DocumentChunk
- **id**: Unique identifier for the chunk
- **documentId**: Reference to the original document
- **content**: The text content of the chunk
- **embedding**: Vector embedding of the content
- **metadata**: Additional metadata (source, page number, chapter, etc.)
- **createdAt**: When the chunk was created

### VectorStore
- **id**: Unique identifier for the vector store
- **name**: Name of the vector store
- **description**: Description of what content is stored
- **dimension**: Dimension of the embeddings
- **size**: Number of vectors stored
- **lastUpdated**: When the store was last updated

### RetrievedContext
- **id**: Unique identifier for the retrieved context
- **query**: The original query
- **chunks**: Array of document chunks retrieved
- **scores**: Similarity scores for each chunk
- **timestamp**: When the retrieval was performed
- **queryEmbedding**: Embedding of the original query

## Simulation Model

### SimulationExercise
- **id**: Unique identifier for the simulation exercise
- **chapterId**: Reference to the parent chapter
- **moduleId**: Reference to the parent module
- **title**: Title of the simulation exercise
- **framework**: Required framework (ROS 2, Gazebo, NVIDIA Isaac)
- **description**: Description of the simulation
- **parameters**: Configuration parameters for the simulation
- **expectedResults**: Expected outcomes from the simulation
- **resources**: Required resources (URDF files, configurations, etc.)

### SimulationResult
- **id**: Unique identifier for the result
- **exerciseId**: Reference to the simulation exercise
- **userId**: Reference to the user who ran the simulation
- **resultData**: Data captured from the simulation run
- **timestamp**: When the simulation was run
- **success**: Whether the simulation met expected results
- **feedback**: Feedback on the simulation run

## Validation Rules

### Chapter Validation
- Title must be 5-100 characters
- Content must not be empty
- Learning objectives must be between 1-5 items
- Duration must be a positive number
- Difficulty must be one of: beginner, intermediate, advanced

### Module Validation
- Title must be 5-100 characters
- Type must be one of: theory, practical, exercise, quiz
- Order must be a positive number
- Learning outcomes must be specific and measurable

### Exercise Validation
- Title must be 5-100 characters
- Description must not be empty
- Required simulation environment must be valid
- Difficulty must be one of: beginner, intermediate, advanced

### UserQuestion Validation
- Question text must be 5-500 characters
- Must have a valid session reference
- Cannot be submitted more than once per second per session

### ChatbotResponse Validation
- Must have a corresponding question
- Response must be between 10-2000 characters
- Confidence score must be between 0-1
- Sources must reference valid textbook content